{% extends 'base.html' %}
{% block content %}
    <p> Here are your favorite recipes! </p>

    <ol>

        {% for key, values in favoriterecipeinfo.items() %}

            <li id='remove-me' class="list-group-item">
                <a href='{{values[0]}}'>{{values[1]}}</a>
                {% if 'user_id' in session %}
                <form id='{{key}}' method="POST" action="/favoriterecipes" class="removebutton" style="text-align: right">
                    <button id="{{key}}" style="font-size:8px"> Delete Recipe <i class="fa fa-thumbs-down" style = "color:black"></i></button>
                </form>
                {% endif %}
            </li>
            {% endfor %}

    </ol>

    <script>
        var elements = document.getElementsByClassName("removebutton");
        var li = document.getElementsByClassName("list-group-item");
        var itemToRemove=document.querySelector('#remove-me')

        

        var myFunction = function(e) {
            
            recipeid=e.target.id;
            console.log(recipeid);
            e.preventDefault();
            
            
            
            

            jQuery.ajax({
                type:"POST",
                dataType:'json',
                contentType: "application/json",
                url:"/deleterecipe",
                data: JSON.stringify(recipeid)
            });  
            $(this).closest('li').remove();
            alert('Recipe Removed!');  
            
        };

        for (var i = 0; i < elements.length; i++) {
            elements[i].addEventListener('click', myFunction, false);
        }
    </script>



{% endblock %}

